name: toolchain
variant: scratch
dependencies:
  - image: "{{ .stagex_prefix }}/core-busybox:{{ .stagex_busybox_version }}@sha256:{{ .stagex_busybox_sha256 }}"
  - stage: binutils
  - stage: gcc
  - stage: linux-headers
  - stage: toolchain-musl
  - stage: make
  - stage: golang
steps:
  - test:
    - |
      echo 'int main(){}' > dummy.c
      cc dummy.c
      ./a.out
      echo -e 'package main\nfunc main() {}' > dummy.go
      go build dummy.go
      ./dummy
finalize:
  - from: /
    to: /
